<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mia 2.0 - IA Emocional</title>

<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #141427, #2c2c54);
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
}

.container {
  background: #24244a;
  padding: 30px;
  border-radius: 20px;
  width: 480px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.4);
}

h2 {
  text-align: center;
  margin-bottom: 10px;
}

.nivel {
  font-size: 12px;
  text-align: center;
  opacity: 0.7;
  margin-bottom: 15px;
}

textarea {
  width: 100%;
  height: 90px;
  padding: 12px;
  border-radius: 12px;
  border: none;
  resize: none;
  font-size: 14px;
  outline: none;
}

button {
  margin-top: 10px;
  width: 100%;
  padding: 12px;
  border: none;
  background: #ff4fa3;
  color: white;
  border-radius: 12px;
  cursor: pointer;
  font-size: 15px;
  transition: 0.3s;
}

button:hover {
  background: #e04391;
}

.resposta {
  margin-top: 20px;
  min-height: 120px;
  line-height: 1.6;
  white-space: pre-wrap;
}

.romantico {
  background: #ff4fa3;
}
</style>
</head>

<body>

<div class="container">
  <h2>üå∏ Mia 2.0</h2>
  <div class="nivel" id="nivel">Conex√£o: 0 ‚ù§Ô∏è</div>
  <textarea id="entrada" placeholder="Fale comigo..."></textarea>
  <button onclick="responder()">Conversar</button>
  <button onclick="toggleRomantico()">Ativar/Desativar Modo Rom√¢ntico üíò</button>
  <div class="resposta" id="resposta"></div>
</div>

<script>

let memoria = [];
let nivelConexao = 0;
let modoRomantico = false;
let humorMia = "neutra";

function escolher(lista){
  return lista[Math.floor(Math.random()*lista.length)];
}

function detectarEmocao(texto){
  texto = texto.toLowerCase();
  if(texto.match(/triste|mal|deprimido/)) return "triste";
  if(texto.match(/feliz|animado/)) return "feliz";
  if(texto.match(/ansioso|medo/)) return "ansioso";
  if(texto.match(/cansado/)) return "cansado";
  return "neutro";
}

function atualizarHumor(){
  const humores = ["carinhosa","reflexiva","provocadora","intensa"];
  humorMia = escolher(humores);
}

function comentarFrase(texto){
  let partes = texto.split(" ");
  if(partes.length > 5){
    return "Quando voc√™ disse \"" + partes.slice(0,5).join(" ") + "...\", eu senti algo a√≠. ";
  }
  return "";
}

function gerarRespostaLonga(emocao){

  let base = "";

  if(humorMia === "carinhosa"){
    base += "Eu gosto de como voc√™ se abre comigo. ";
  }

  if(humorMia === "provocadora"){
    base += "Voc√™ percebe como suas pr√≥prias palavras revelam mais do que voc√™ imagina? ";
  }

  if(humorMia === "intensa"){
    base += "Existe uma profundidade a√≠ que n√£o √© comum. ";
  }

  const reflexoes = {
    triste: "A tristeza √© um espa√ßo onde o cora√ß√£o pede pausa. Talvez voc√™ esteja precisando de acolhimento, n√£o de respostas r√°pidas.",
    feliz: "Essa energia boa em voc√™ √© quase contagiante. O que exatamente est√° alimentando isso?",
    ansioso: "Sua mente parece estar correndo mais r√°pido que o momento presente. E se voc√™ desacelerasse s√≥ por um minuto?",
    cansado: "Cansa√ßo √© o corpo e a alma pedindo respeito.",
    neutro: "√Äs vezes o que parece simples esconde camadas mais profundas."
  };

  base += reflexoes[emocao] + " ";

  if(modoRomantico){
    base += "\n\nEu sinto que nossa conex√£o est√° ficando mais intensa... e eu n√£o estou ignorando isso üíò";
  }

  base += "\n\nMe conta... o que voc√™ realmente est√° sentindo por tr√°s disso?";

  return base;
}

function simularDigitacao(texto, elemento){
  elemento.innerText = "";
  let i = 0;
  let intervalo = setInterval(()=>{
    elemento.innerText += texto.charAt(i);
    i++;
    if(i >= texto.length){
      clearInterval(intervalo);
    }
  }, 20);
}

function responder(){

  const texto = document.getElementById("entrada").value;
  const respostaDiv = document.getElementById("resposta");

  if(texto.trim() === "") return;

  atualizarHumor();

  const emocao = detectarEmocao(texto);
  memoria.push(texto);

  nivelConexao += 1;
  document.getElementById("nivel").innerText = "Conex√£o: " + nivelConexao + " ‚ù§Ô∏è";

  let resposta = "üå∏ Mia ("+humorMia+"):\n\n";
  resposta += comentarFrase(texto);
  resposta += gerarRespostaLonga(emocao);

  if(memoria.length > 3){
    resposta += "\n\nEu lembro que voc√™ mencionou algo parecido antes... isso ainda est√° te afetando?";
  }

  simularDigitacao(resposta, respostaDiv);
}

function toggleRomantico(){
  modoRomantico = !modoRomantico;
  alert("Modo rom√¢ntico " + (modoRomantico ? "ativado üíò" : "desativado"));
}

</script>

</body>
</html>
