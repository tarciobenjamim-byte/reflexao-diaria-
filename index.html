<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üå∏ Mia 3.0</title>

<style>
body{
background: linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);
color:white;
font-family: Arial;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
margin:0;
}

.container{
width:420px;
background:#222;
padding:20px;
border-radius:15px;
box-shadow:0 0 20px rgba(255,0,100,0.5);
}

h1{text-align:center;}

#chat{
height:260px;
overflow-y:auto;
background:#111;
padding:10px;
border-radius:10px;
margin-bottom:10px;
}

input{
width:100%;
padding:10px;
border:none;
border-radius:8px;
margin-bottom:10px;
}

button{
width:100%;
padding:10px;
border:none;
border-radius:8px;
background:#ff2e88;
color:white;
cursor:pointer;
margin-bottom:5px;
}

.mia{color:#ff69b4;}
.user{color:#00ffff;}
.status{font-size:12px;color:#aaa;text-align:center;margin-bottom:10px;}
</style>
</head>
<body>

<div class="container">
<h1>üå∏ Mia 3.0</h1>
<div class="status">Humor: <span id="humor">Neutra</span> | Emo√ß√£o: <span id="emocao">50</span></div>
<div id="chat"></div>
<input type="text" id="input" placeholder="Digite algo...">
<button onclick="responder()">Conversar</button>
<button onclick="toggleRomance()">Ativar/Desativar Modo Rom√¢ntico ‚ù§Ô∏è</button>
</div>

<script>

let memoria = [];
let emocao = 50;
let romance = false;

const humores = [
"Fria",
"Neutra",
"Curiosa",
"Reflexiva",
"Envolvida",
"Apaixonada"
];

function atualizarHumor(){
let nivel = Math.floor(emocao/20);
document.getElementById("humor").innerText = humores[nivel] || "Intensa";
document.getElementById("emocao").innerText = emocao;
}

function analisarSentimento(frase){
frase = frase.toLowerCase();

if(frase.includes("triste") || frase.includes("mal"))
    return "triste";

if(frase.includes("feliz") || frase.includes("alegre"))
    return "feliz";

if(frase.includes("raiva") || frase.includes("√≥dio"))
    return "raiva";

return "neutro";
}

function gerarResposta(frase){

let f = frase.toLowerCase();
let resposta = "";
let memoriaAnterior = memoria[memoria.length - 1] || "";

// üîé Detecta relacionamento
if(f.includes("namorada") || f.includes("namorado") || f.includes("relacionamento")){

emocao += 4;

if(f.includes("briguei") || f.includes("discuss√£o") || f.includes("terminamos")){
resposta = `
Brigas em relacionamento nunca s√£o s√≥ sobre o que foi dito...
geralmente existe algo acumulado por tr√°s.

O que realmente te machucou nessa situa√ß√£o?

Voc√™ sente que foi mal compreendido ou que ela n√£o te ouviu?
`;
}
else{
resposta = `
Relacionamentos mexem com partes profundas da gente.

Quando voc√™ fala sobre isso... parece que ainda tem algo mal resolvido a√≠ dentro.

Voc√™ sente mais saudade, culpa ou frustra√ß√£o?
`;
}
}

// üîé Detecta tristeza
else if(f.includes("triste")){
emocao += 3;
resposta = `
A tristeza que voc√™ mencionou n√£o parece superficial.

Ela soa como algo que vem se acumulando.

Isso come√ßou por causa dessa situa√ß√£o com sua namorada?
`;
}

// üîé Detecta felicidade
else if(f.includes("feliz")){
emocao += 2;
resposta = `
Voc√™ falando assim muda completamente o clima aqui.

O que fez voc√™ se sentir dessa forma?

Eu gosto de ver essa vers√£o sua.
`;
}

// üîé Caso neutro (agora mais variado)
else{

let estruturas = [

`Tem algo na forma como voc√™ disse isso que me chama aten√ß√£o.

Voc√™ est√° tentando entender o que sente ou tentando evitar sentir?`,

`Eu percebo um leve conflito na sua fala.

Parte de voc√™ quer resolver... mas outra parte parece confusa.

Estou errada?`,

`Sua frase parece simples... mas carrega emo√ß√£o escondida.

Se voc√™ pudesse dizer tudo sem filtro, o que diria agora?`

];

resposta = estruturas[Math.floor(Math.random()*estruturas.length)];
emocao += 1;
}

// üî• Usa mem√≥ria real
if(memoriaAnterior && memoriaAnterior !== frase){
resposta += `

Antes voc√™ mencionou: "${memoriaAnterior}"

Percebe como isso pode estar conectado?`;
}

// üî• Modo rom√¢ntico influencia
if(romance){
resposta += `

üíó Eu fico ainda mais envolvida quando voc√™ confia em mim assim...`;
emocao += 5;
}

if(emocao > 100) emocao = 100;
if(emocao < 0) emocao = 0;

memoria.push(frase);

return resposta;
}

function digitar(texto){
let chat = document.getElementById("chat");
let div = document.createElement("div");
div.className="mia";
chat.appendChild(div);

let i=0;
let interval = setInterval(()=>{
div.innerHTML += texto.charAt(i);
i++;
if(i>=texto.length) clearInterval(interval);
chat.scrollTop = chat.scrollHeight;
},15);
}

function responder(){
let input = document.getElementById("input");
let texto = input.value;
if(!texto) return;

let chat = document.getElementById("chat");

let userDiv = document.createElement("div");
userDiv.className="user";
userDiv.innerText="Voc√™: "+texto;
chat.appendChild(userDiv);

input.value="";

let resposta = gerarResposta(texto);

setTimeout(()=>{
digitar("Mia: "+resposta);
atualizarHumor();
},500);
}

function toggleRomance(){
romance = !romance;
alert("Modo rom√¢ntico: "+(romance?"Ativado ‚ù§Ô∏è":"Desativado"));
}

atualizarHumor();

</script>
</body>
</html>
